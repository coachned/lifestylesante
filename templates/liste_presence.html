{% extends 'base/base.html' %}
{% block content %}
<br><br>
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">Filtrer les présences</h6>
                <div class="mb-3 d-flex justify-content-between flex-wrap">
                    <!-- Liens de filtrage -->
                    <a href="{% url 'liste_arrivees_departs' %}" class="btn btn-secondary btn-sm mb-2 me-2 btn-block">Afficher Tout</a>
                    <a href="{% url 'liste_par_mois' mois=10 annee=2024 %}" class="btn btn-info btn-sm mb-2 me-2 btn-block">Afficher par Mois</a>
                    <a href="{% url 'liste_par_semaine' semaine=1 annee=2024 %}" class="btn btn-warning btn-sm mb-2 me-2 btn-block">Afficher par Semaine</a>
                </div>
                
                <!-- Liste des arrivées -->
                <h6 class="mb-4">Liste de présence des arrivées</h6>
                <div class="mb-3 d-flex justify-content-between flex-wrap">
                    <!-- Boutons pour télécharger les tableaux et imprimer -->
                    <a href="{% url 'export_arrivees_csv' %}" class="btn btn-primary btn-sm mb-2 me-2 btn-block">Télécharger en CSV</a>
                    <a href="{% url 'export_arrivees_pdf' %}" class="btn btn-danger btn-sm mb-2 me-2 btn-block">Télécharger en PDF</a>
                    <button onclick="window.print();" class="btn btn-success btn-sm mb-2 me-2 btn-block no-print">Imprimer</button>
                </div>

                {% if arrivees|length > 0 %}
                <div class="table-responsive">
                    <table class="table table-bordered table-hover text-center">
                        <thead>
                            <tr>
                                <th scope="col">Numéro de présence</th>
                                <th scope="col">Matricule</th>
                                <th scope="col">Nom</th>
                                <th scope="col">Prénom</th>
                                <th scope="col">Genre</th>
                                <th scope="col">Nationalité</th>
                                <th scope="col">Fonction</th>
                                <th scope="col">Arrivée</th>
                                <th scope="col">Date et heure d'arrivée</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for arrivee in arrivees %}
                            <tr>
                                <th scope="row">{{ arrivee.id }}</th>
                                <td>{{ arrivee.employe.matricule_employe }}</td>
                                <td>{{ arrivee.employe.nom }}</td>
                                <td>{{ arrivee.employe.prenom }}</td>
                                <td>{{ arrivee.employe.genre }}</td>
                                <td>{{ arrivee.employe.nationalite }}</td>
                                <td>{{ arrivee.employe.fonction }}</td>
                                <td>{{ arrivee.arrivee }}</td>
                                <td>{{ arrivee.date_arrivee }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                    <p class="text-center">Aucune arrivée</p>
                {% endif %}
            </div>
        </div>

        <!-- Section des départs -->
        <div class="col-12 mt-4">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">Liste de présence des départs</h6>
                <div class="mb-3 d-flex justify-content-between flex-wrap">
                    <!-- Boutons pour télécharger les tableaux et imprimer -->
                    <a href="{% url 'export_departs_csv' %}" class="btn btn-primary btn-sm mb-2 me-2 btn-block">Télécharger en CSV</a>
                    <a href="{% url 'export_departs_pdf' %}" class="btn btn-danger btn-sm mb-2 me-2 btn-block">Télécharger en PDF</a>
                    <button onclick="window.print();" class="btn btn-success btn-sm mb-2 me-2 btn-block no-print">Imprimer</button>
                </div>

                {% if departs|length > 0 %}
                <div class="table-responsive">
                    <table class="table table-bordered table-hover text-center">
                        <thead>
                            <tr>
                                <th scope="col">Numéro de présence</th>
                                <th scope="col">Matricule</th>
                                <th scope="col">Nom</th>
                                <th scope="col">Prénom</th>
                                <th scope="col">Genre</th>
                                <th scope="col">Nationalité</th>
                                <th scope="col">Fonction</th>
                                <th scope="col">Départ</th>
                                <th scope="col">Date et heure de départ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for depart in departs %}
                            <tr>
                                <th scope="row">{{ depart.id }}</th>
                                <td>{{ depart.employe.matricule_employe }}</td>
                                <td>{{ depart.employe.nom }}</td>
                                <td>{{ depart.employe.prenom }}</td>
                                <td>{{ depart.employe.genre }}</td>
                                <td>{{ depart.employe.nationalite }}</td>
                                <td>{{ depart.employe.fonction }}</td>
                                <td>{{ depart.depart }}</td>
                                <td>{{ depart.date_depart }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                    <p class="text-center">Aucun départ</p>
                {% endif %}
            </div>
        </div>

    </div>
</div>
{% endblock %}
